{"ast":null,"code":"import _regeneratorRuntime from \"/workspaces/Project/Final/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/workspaces/Project/Final/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.string.search.js\";\nimport global from './Global.js';\nexport default {\n  data: function data() {\n    return {\n      products: [],\n      search: ''\n    };\n  },\n  created: function created() {\n    var _this = this;\n    fetch('/data.json').then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      return _this.products = data.products;\n    });\n  },\n  computed: {\n    filtered: function filtered() {\n      var _this2 = this;\n      return this.products.filter(function (product) {\n        return product.name.toLowerCase().includes(_this2.search.toLowerCase()) && product.category === \"general\";\n      });\n    }\n  },\n  methods: {\n    ajouter: function ajouter(product) {\n      global.sum += product.price;\n      global.panier.push(product);\n      alert(\"product added to the bucket\");\n    },\n    supp: function supp(product) {\n      var _this3 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch(\"http://localhost:3000/products/\".concat(product.id), {\n                method: 'DELETE'\n              }).then(function (response) {\n                if (response.ok) {\n                  _this3.products = _this3.products.filter(function (p) {\n                    return p.id !== product.id;\n                  });\n                  alert(\"product deleted\");\n                }\n              });\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["global","data","products","search","created","_this","fetch","then","response","json","computed","filtered","_this2","filter","product","name","toLowerCase","includes","category","methods","ajouter","sum","price","panier","push","alert","supp","_this3","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","concat","id","method","ok","p","stop"],"sources":["/workspaces/Project/Final/src/views/GeneralPage.vue"],"sourcesContent":["<template>\r\n    <div class=\"general-container\">\r\n        <h2>General Products</h2>\r\n          <input type=\"text\" placeholder=\"Search for a product\" v-model=\"search\" >\r\n        <div class=\"products-wrapper\">\r\n            <div v-for=\"product in filtered\" :key=\"product.id\" class=\"product-card\">\r\n                <div v-if=\"product.category==='general'\">\r\n                    <img :src=\"require('@/assets/'+product.image)\" class=\"product-img\"><br>\r\n                    <span class=\"product-name\">{{ product.name }}</span><br>\r\n                    <span class=\"product-price\">{{ product.price }}$</span><br>\r\n                    <button @click=\"ajouter(product)\" class=\"add-btn\">Add to the bucket</button>\r\n                    <button @click=\"supp(product)\" v-if=\"product.flag\" class=\"delete-btn\"> delete your product</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport global from './Global.js'\r\nexport default{\r\n    data(){\r\n        return {\r\n            products:[],\r\n            search:''\r\n            \r\n        }\r\n    }, created(){\r\n        fetch('/data.json')\r\n        .then(response=>response.json())\r\n        .then(data=>\r\n            this.products=data.products\r\n        )\r\n    },computed:{\r\n        filtered(){\r\n            return this.products.filter(product=>product.name.toLowerCase().includes(this.search.toLowerCase()) && product.category===\"general\")\r\n        }\r\n    },\r\n    methods:{\r\n        ajouter(product){\r\n            global.sum+=product.price\r\n            global.panier.push(product)\r\n            alert(\"product added to the bucket\")\r\n        },\r\n        async supp(product){\r\n           await  fetch(`http://localhost:3000/products/${product.id}`,{\r\n                method:'DELETE',\r\n\r\n            })\r\n            .then(response =>{\r\n                if (response.ok){\r\n                    this.products=this.products.filter(p=>p.id!==product.id)\r\n                    alert(\"product deleted\")\r\n                }\r\n                }\r\n            )\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"mappings":";;;;;;;;;;;;AAkBA,OAAOA,MAAK,MAAO,aAAY;AAC/B,eAAc;EACVC,IAAI,WAAJA,IAAIA,CAAA,EAAE;IACF,OAAO;MACHC,QAAQ,EAAC,EAAE;MACXC,MAAM,EAAC;IAEX;EACJ,CAAC;EAAEC,OAAO,WAAPA,OAAOA,CAAA,EAAE;IAAA,IAAAC,KAAA;IACRC,KAAK,CAAC,YAAY,EACjBC,IAAI,CAAC,UAAAC,QAAQ;MAAA,OAAEA,QAAQ,CAACC,IAAI,CAAC,CAAC;IAAA,GAC9BF,IAAI,CAAC,UAAAN,IAAI;MAAA,OACNI,KAAI,CAACH,QAAQ,GAACD,IAAI,CAACC,QAAO;IAAA,CAC9B;EACJ,CAAC;EAACQ,QAAQ,EAAC;IACPC,QAAQ,WAARA,QAAQA,CAAA,EAAE;MAAA,IAAAC,MAAA;MACN,OAAO,IAAI,CAACV,QAAQ,CAACW,MAAM,CAAC,UAAAC,OAAO;QAAA,OAAEA,OAAO,CAACC,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACL,MAAI,CAACT,MAAM,CAACa,WAAW,CAAC,CAAC,KAAKF,OAAO,CAACI,QAAQ,KAAG,SAAS;MAAA;IACvI;EACJ,CAAC;EACDC,OAAO,EAAC;IACJC,OAAO,WAAPA,OAAOA,CAACN,OAAO,EAAC;MACZd,MAAM,CAACqB,GAAG,IAAEP,OAAO,CAACQ,KAAI;MACxBtB,MAAM,CAACuB,MAAM,CAACC,IAAI,CAACV,OAAO;MAC1BW,KAAK,CAAC,6BAA6B;IACvC,CAAC;IACKC,IAAI,WAAJA,IAAIA,CAACZ,OAAO,EAAC;MAAA,IAAAa,MAAA;MAAA,OAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,OAAAF,mBAAA,GAAAG,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAF,QAAA,CAAAE,IAAA;cAAA,OACT9B,KAAK,mCAAA+B,MAAA,CAAmCvB,OAAO,CAACwB,EAAE,GAAG;gBACvDC,MAAM,EAAC;cAEX,CAAC,EACAhC,IAAI,CAAC,UAAAC,QAAO,EAAI;gBACb,IAAIA,QAAQ,CAACgC,EAAE,EAAC;kBACZb,MAAI,CAACzB,QAAQ,GAACyB,MAAI,CAACzB,QAAQ,CAACW,MAAM,CAAC,UAAA4B,CAAC;oBAAA,OAAEA,CAAC,CAACH,EAAE,KAAGxB,OAAO,CAACwB,EAAE;kBAAA;kBACvDb,KAAK,CAAC,iBAAiB;gBAC3B;cACA,CACJ;YAAA;YAAA;cAAA,OAAAS,QAAA,CAAAQ,IAAA;UAAA;QAAA,GAAAX,OAAA;MAAA;IACJ;EACJ;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}